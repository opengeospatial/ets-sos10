<?xml version="1.0" encoding="UTF-8"?>
<ctl:package xmlns:ctl="http://www.occamlab.com/ctl" xmlns:describeSensor="https://cite.opengeospatial.org/sos-1.0.0/src/ctl/DescribeSensor.xml" xmlns:getCapabilities="https://cite.opengeospatial.org/sos-1.0.0/src/ctl/GetCapabilities.xml" xmlns:getObservation="https://cite.opengeospatial.org/sos-1.0.0/src/ctl/GetObservation.xml" xmlns:gml="http://www.opengis.net/gml" xmlns:html="http://www.w3.org/1999/xhtml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:om="http://www.opengis.net/om/1.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:owsTests="https://www.cite.opengeospatial.org/ows-1.0/tests" xmlns:parsers="http://www.occamlab.com/te/parsers" xmlns:saxon="http://saxon.sf.net/" xmlns:sos="http://www.opengis.net/sos/1.0" xmlns:sosFunctions="https://cite.opengeospatial.org/sos-1.0.0/src/ctl/functions.xml" xmlns:tep="http://teamengine.sourceforge.net/parsers" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   
   <xi:include href="DescribeSensor.xml"/>
   <xi:include href="functions.xml"/>
   <xi:include href="GetCapabilities.xml"/>
   <xi:include href="GetObservation.xml"/>
   <xi:include href="OWS.xml"/>
   <xi:include href="SOS_ETS.xml" />
   
   <ctl:suite name="sos:suite-auto">
      <!--NOTE: Don't forget to update the TARGET_NAMESPACE_URI and docs/sos/1.0/SOS 1.0 ATS.html placeholder values-->
      <ctl:title>SOS 1.0 Compliance Test Suite</ctl:title>
      <ctl:description>Verifies that an SOS 1.0 implementation complies with a given conformance class.</ctl:description>
      <ctl:link>docs/sos/1.0.0/</ctl:link>
      <ctl:starting-test>sos:Main-auto</ctl:starting-test>
   </ctl:suite>
   <ctl:test name="sos:Main-auto" isConformanceClass="true" isBasic="true">
      <ctl:param name="service-url"/>
      <ctl:param name="which-tests"/>
      <ctl:assertion>The IUT satisfies all applicable assertions.</ctl:assertion>
      <ctl:code>

         <!-- Get user input, message user options -->
         <xsl:variable name="sos.service.url" select="$service-url" />
         <!-- New messages and user option variables added 2010-12-30 PwD -->
         <ctl:message select="concat('sos.service.url ',$sos.service.url)" />
         <xsl:variable name="which-tests" select="$which-tests" />
         <ctl:message select="concat('which tests: ',$which-tests)" />
         <xsl:variable name="run-ows-main" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run ows-main: ',$run-ows-main)" />
         <xsl:variable name="run-sos-general-main" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-general-main: ',$run-sos-general-main)" />
         <xsl:variable name="run-sos-gc-kvp-rph" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-gc-kvp-rph: ',$run-sos-gc-kvp-rph)" />
         <xsl:variable name="run-sos-gc-kvp-rsph" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-gc-kvp-rsph: ',$run-sos-gc-kvp-rsph)" />
         <xsl:variable name="run-sos-gc-kvp-rrph" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-gc-kvp-rrph: ',$run-sos-gc-kvp-rrph)" />
         <xsl:variable name="run-sos-gc-ommo" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-gc-ommo: ',$run-sos-gc-ommo)" />
         <xsl:variable name="run-sos-gc-omoo" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-gc-omoo: ',$run-sos-gc-omoo)" />
         <xsl:variable name="run-sos-gc-rcvt" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-gc-rcvt: ',$run-sos-gc-rcvt)" />
         <xsl:variable name="run-sos-gc-rcvp" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-gc-rcvp: ',$run-sos-gc-rcvp)" />
         <xsl:variable name="run-sos-gc-rcvop" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-gc-rcvop: ',$run-sos-gc-rcvop)" />
         <xsl:variable name="run-sos-gc-rcvrf" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-gc-rcvrf: ',$run-sos-gc-rcvrf)" />
         <xsl:variable name="run-sos-gc-rcvrm" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-gc-rcvrm: ',$run-sos-gc-rcvrm)" />
         <xsl:variable name="run-sos-gc-rcvrm2" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-gc-rcvrm2: ',$run-sos-gc-rcvrm2)" />
         <xsl:variable name="run-sos-ds-rimt" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-ds-rimt: ',$run-sos-ds-rimt)" />
         <xsl:variable name="run-sos-ds-rip" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-ds-rip: ',$run-sos-ds-rip)" />
         <xsl:variable name="run-sos-ds-rmrf" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-ds-rmrf: ',$run-sos-ds-rmrf)" />
         <xsl:variable name="run-sos-ds-rmp" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-ds-rmp ',$run-sos-ds-rmp)" />
         <xsl:variable name="run-sos-go-risn" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-go-risn: ',$run-sos-go-risn)" />
         <xsl:variable name="run-sos-go-rio" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-go-rio: ',$run-sos-go-rio)" />
         <xsl:variable name="run-sos-go-riet" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-go-riet ',$run-sos-go-riet)" />
         <xsl:variable name="run-sos-go-rip" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-go-rip: ',$run-sos-go-rip)" />
         <xsl:variable name="run-sos-go-rifoi" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-go-rifoi: ',$run-sos-go-rifoi)" />
         <xsl:variable name="run-sos-go-riop" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-go-riop: ',$run-sos-go-riop)" />
         <xsl:variable name="run-sos-go-rir" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-go-rir ',$run-sos-go-rir)" />
         <xsl:variable name="run-sos-go-rirf" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-go-rirf: ',$run-sos-go-rirf)" />
         <xsl:variable name="run-sos-go-rirm" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-go-rirm: ',$run-sos-go-rirm)" />
         <xsl:variable name="run-sos-go-rirm2" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-go-rirm2: ',$run-sos-go-rirm2)" />
         <xsl:variable name="run-sos-go-rmsd" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-go-rmsd: ',$run-sos-go-rmsd)" />
         <xsl:variable name="run-sos-go-rmpd" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-go-rmpd: ',$run-sos-go-rmpd)" />
         <xsl:variable name="run-sos-go-rmopd" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-go-rmopd: ',$run-sos-go-rmopd)" />
         <xsl:variable name="run-sos-go-raetd" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-go-raetd: ',$run-sos-go-raetd)" />
         <xsl:variable name="run-sos-go-rmetd" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-go-rmetd: ',$run-sos-go-rmetd)" />
         <xsl:variable name="run-sos-go-rmfoid" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-go-rmfoid: ',$run-sos-go-rmfoid)" />
         <xsl:variable name="run-sos-go-rmrd" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-go-rmrd: ',$run-sos-go-rmrd)" />
         <xsl:variable name="run-sos-go-rmrfd" select="($which-tests eq 'all')" />
         <ctl:message select="concat('run sos-go-rmrfd: ',$run-sos-go-rmrfd)" />
         <xsl:variable name="run-sos-core" select="$run-sos-gc-kvp-rph or $run-sos-gc-kvp-rsph or $run-sos-gc-kvp-rrph or $run-sos-gc-ommo or $run-sos-gc-omoo or $run-sos-gc-rcvt or $run-sos-gc-rcvp or $run-sos-gc-rcvop or $run-sos-gc-rcvrf or $run-sos-gc-rcvrm or $run-sos-gc-rcvrm2 or $run-sos-ds-rimt or $run-sos-ds-rip or $run-sos-ds-rmrf or $run-sos-ds-rmp or $run-sos-go-risn or $run-sos-go-riet or $run-sos-go-rip or $run-sos-go-rifoi or $run-sos-go-riop or $run-sos-go-rir or $run-sos-go-rirf or $run-sos-go-rirm or $run-sos-go-rirm2 or $run-sos-go-rmsd or $run-sos-go-rmpd or $run-sos-go-rmopd or $run-sos-go-raetd or $run-sos-go-rmetd or $run-sos-go-rmfoid or $run-sos-go-rmrd or $run-sos-go-rmrfd" />
         <ctl:message select="concat('run sos-core: ',$run-sos-core)" />
         <!-- set other "global" variables -->
         <xsl:variable name="ogc.schema.root" select="'xsd/ogc/'" />
         <xsl:variable name="sos.schema.root" select="$ogc.schema.root" />
         <xsl:variable name="sos.version" select="'1.0.0'" />
         <xsl:variable name="ows.version" select="'1.1.0'" />
         <xsl:variable name="exceptionReportSchema" select="sosFunctions:exceptionReportSchemaPath($ogc.schema.root, $ows.version)" />
         <ctl:message select="concat('SOS service URL: ',$sos.service.url)" />
         <xsl:if test="$run-ows-main">
            <ctl:call-test name="sos:ows-main">
               <!-- 2010-12-30 PwD -->
               <ctl:with-param name="serviceURL" select="$sos.service.url" />
               <ctl:with-param name="exceptionReportSchema" select="$exceptionReportSchema" />
               <ctl:with-param name="sosSchemaRoot" select="$sos.schema.root" />
               <ctl:with-param name="sosVersion" select="$sos.version" />
            </ctl:call-test>
         </xsl:if>
         <xsl:if test="$run-sos-general-main">
            <!-- 2010-12-30 PwD -->
            <ctl:call-test name="sos:general-main">
               <ctl:with-param name="serviceURL" select="$sos.service.url" />
               <ctl:with-param name="exceptionReportSchema" select="$exceptionReportSchema" />
               <ctl:with-param name="sosSchemaRoot" select="$sos.schema.root" />
               <ctl:with-param name="sosVersion" select="$sos.version" />
            </ctl:call-test>
         </xsl:if>
         <xsl:if test="$run-sos-core">
            <!-- 2010-12-30 PwD -->
            <ctl:call-test name="sos:core-main">
               <ctl:with-param name="serviceURL" select="$sos.service.url" />
               <ctl:with-param name="ogcSchemaRoot" select="$ogc.schema.root" />
               <ctl:with-param name="exceptionReportSchema" select="$exceptionReportSchema" />
               <ctl:with-param name="sosSchemaRoot" select="$sos.schema.root" />
               <ctl:with-param name="sosVersion" select="$sos.version" />
               <!-- Following parameters added 2010-12-30 PwD -->
               <ctl:with-param name="run-sos-gc-kvp-rph" select="$run-sos-gc-kvp-rph" />
               <ctl:with-param name="run-sos-gc-kvp-rsph" select="$run-sos-gc-kvp-rsph" />
               <ctl:with-param name="run-sos-gc-kvp-rrph" select="$run-sos-gc-kvp-rrph" />
               <ctl:with-param name="run-sos-gc-ommo" select="$run-sos-gc-ommo" />
               <ctl:with-param name="run-sos-gc-omoo" select="$run-sos-gc-omoo" />
               <ctl:with-param name="run-sos-gc-rcvt" select="$run-sos-gc-rcvt" />
               <ctl:with-param name="run-sos-gc-rcvp" select="$run-sos-gc-rcvp" />
               <ctl:with-param name="run-sos-gc-rcvop" select="$run-sos-gc-rcvop" />
               <ctl:with-param name="run-sos-gc-rcvrf" select="$run-sos-gc-rcvrf" />
               <ctl:with-param name="run-sos-gc-rcvrm" select="$run-sos-gc-rcvrm" />
               <ctl:with-param name="run-sos-gc-rcvrm2" select="$run-sos-gc-rcvrm2" />
               <ctl:with-param name="run-sos-ds-rimt" select="$run-sos-ds-rimt" />
               <ctl:with-param name="run-sos-ds-rip" select="$run-sos-ds-rip" />
               <ctl:with-param name="run-sos-ds-rmrf" select="$run-sos-ds-rmrf" />
               <ctl:with-param name="run-sos-ds-rmp" select="$run-sos-ds-rmp" />
               <ctl:with-param name="run-sos-go-risn" select="$run-sos-go-risn" />
               <ctl:with-param name="run-sos-go-rio" select="$run-sos-go-rio" />
               <ctl:with-param name="run-sos-go-riet" select="$run-sos-go-riet" />
               <ctl:with-param name="run-sos-go-rip" select="$run-sos-go-rip" />
               <ctl:with-param name="run-sos-go-rifoi" select="$run-sos-go-rifoi" />
               <ctl:with-param name="run-sos-go-riop" select="$run-sos-go-riop" />
               <ctl:with-param name="run-sos-go-rir" select="$run-sos-go-rir" />
               <ctl:with-param name="run-sos-go-rirf" select="$run-sos-go-rirf" />
               <ctl:with-param name="run-sos-go-rirm" select="$run-sos-go-rirm" />
               <ctl:with-param name="run-sos-go-rirm2" select="$run-sos-go-rirm2" />
               <ctl:with-param name="run-sos-go-rmsd" select="$run-sos-go-rmsd" />
               <ctl:with-param name="run-sos-go-rmpd" select="$run-sos-go-rmpd" />
               <ctl:with-param name="run-sos-go-rmopd" select="$run-sos-go-rmopd" />
               <ctl:with-param name="run-sos-go-raetd" select="$run-sos-go-raetd" />
               <ctl:with-param name="run-sos-go-rmetd" select="$run-sos-go-rmetd" />
               <ctl:with-param name="run-sos-go-rmfoid" select="$run-sos-go-rmfoid" />
               <ctl:with-param name="run-sos-go-rmrd" select="$run-sos-go-rmrd" />
               <ctl:with-param name="run-sos-go-rmrfd" select="$run-sos-go-rmrfd" />
            </ctl:call-test>
         </xsl:if>
      </ctl:code>
   </ctl:test>
</ctl:package>